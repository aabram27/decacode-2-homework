<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Breweries</title>
  </head>
  <body>
    <input type="text" placeholder="Brewery name" id="bName"/>
    <button id="button" type="button">Поиск</button>
    <table id="breweries">
        <thead></thead>
        <tbody></tbody>
    </table>
    <script type="text/javascript">
      (() => {
        const $button = document.getElementById('button');
        const $breweriesList = document.getElementById('breweries');
        const $bName = document.getElementById('bName');
        let isLoading = false;
  
        $button.addEventListener("click", () => {
          if (isLoading === false) {
            $button.textContent = 'loading...';
            isLoading = true;
  
            fetch('https://api.openbrewerydb.org/breweries?by_name='+$bName.value)
              .then((response) => response.json())
              .then((data) => {
                $breweriesList.tBodies[0].innerHTML = "";
                $breweriesList.tHead.innerHTML = "";
                if (data.length>0){
                    Object.keys(data[0]).forEach(function (key) {
                        let $th = document.createElement('th');
                        $th.textContent = key[0].toUpperCase() + key.substr(1);
                        $breweriesList.tHead.appendChild($th);
                    });
                }
                data.forEach(x => {
                    let $tr = document.createElement('tr');
                    Object.keys(x).forEach(function (key) {
                        let $td = document.createElement('td');
                        $td.textContent = x[key];
                        $tr.appendChild($td);
                    });
                    
                    $breweriesList.tBodies[0].appendChild($tr);
                });
                $button.textContent = 'Поиск';
                isLoading = false;
                
              });
            }
          })

      })();
    </script>
    <style>
        table{
            font-size:0.8em;
            font-family: Arial, Helvetica, sans-serif;
            border-spacing: 0;
        }
        table td {
            border: 1px solid lightgray;
        }
    </style>
  </body>
</html>